export class OrderedFrozenMap extends Map {
  constructor(
    pairs,
    ordering = (a, b) => {
      if (a < b) return -1;
      if (b > a) return +1;
      return 0;
    }
  ) {
    pairs.sort(([aKey, _aValue], [bKey, _bValue]) => ordering(aKey, bKey));
    super(pairs);
    Object.freeze(this);
  }
  static with(values, f, ordering) {
    return new OrderedFrozenMap(
      [...values].map((value) => [f(value), value]),
      ordering
    );
  }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2h5LmpzIiwic291cmNlUm9vdCI6Ii4vIiwic291cmNlcyI6WyJ3aHkudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTSxPQUFPLGdCQUF1QixTQUFRLEdBQVM7SUFFbkQsWUFDRSxLQUFvQixFQUNwQixXQUFtQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRTtRQUMxQyxJQUFJLENBQUMsR0FBRyxDQUFDO1lBQUUsT0FBTyxDQUFDLENBQUMsQ0FBQztRQUNyQixJQUFJLENBQUMsR0FBRyxDQUFDO1lBQUUsT0FBTyxDQUFDLENBQUMsQ0FBQztRQUNyQixPQUFPLENBQUMsQ0FBQztJQUNYLENBQUM7UUFFRCxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLEVBQUUsT0FBTyxDQUFDLEVBQUUsQ0FBQyxJQUFJLEVBQUUsT0FBTyxDQUFDLEVBQUUsRUFBRSxDQUFDLFFBQVEsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQztRQUN2RSxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDYixNQUFNLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQ3RCLENBQUM7SUFFTSxNQUFNLENBQUMsSUFBSSxDQUNoQixNQUFtQixFQUNuQixDQUFjLEVBQ2QsUUFBaUM7UUFFakMsT0FBTyxJQUFJLGdCQUFnQixDQUN6QixDQUFDLEdBQUcsTUFBTSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQyxFQUM3QyxRQUFRLENBQ1QsQ0FBQztJQUNKLENBQUM7Q0FDRiIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjbGFzcyBPcmRlcmVkRnJvemVuTWFwPEssIFY+IGV4dGVuZHMgTWFwPEssIFY+XHJcbiAgaW1wbGVtZW50cyBSZWFkb25seTxNYXA8SywgVj4+IHtcclxuICBwdWJsaWMgY29uc3RydWN0b3IoXHJcbiAgICBwYWlyczogQXJyYXk8W0ssIFZdPixcclxuICAgIG9yZGVyaW5nOiAoYTogSywgYjogSykgPT4gbnVtYmVyID0gKGEsIGIpID0+IHtcclxuICAgICAgaWYgKGEgPCBiKSByZXR1cm4gLTE7XHJcbiAgICAgIGlmIChiID4gYSkgcmV0dXJuICsxO1xyXG4gICAgICByZXR1cm4gMDtcclxuICAgIH0sXHJcbiAgKSB7XHJcbiAgICBwYWlycy5zb3J0KChbYUtleSwgX2FWYWx1ZV0sIFtiS2V5LCBfYlZhbHVlXSkgPT4gb3JkZXJpbmcoYUtleSwgYktleSkpO1xyXG4gICAgc3VwZXIocGFpcnMpO1xyXG4gICAgT2JqZWN0LmZyZWV6ZSh0aGlzKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgd2l0aDxLLCBWPihcclxuICAgIHZhbHVlczogSXRlcmFibGU8Vj4sXHJcbiAgICBmOiAodjogVikgPT4gSyxcclxuICAgIG9yZGVyaW5nPzogKGE6IEssIGI6IEspID0+IG51bWJlcixcclxuICApIHtcclxuICAgIHJldHVybiBuZXcgT3JkZXJlZEZyb3plbk1hcChcclxuICAgICAgWy4uLnZhbHVlc10ubWFwKCh2YWx1ZSkgPT4gW2YodmFsdWUpLCB2YWx1ZV0pLFxyXG4gICAgICBvcmRlcmluZyxcclxuICAgICk7XHJcbiAgfVxyXG59XHJcbiJdfQ==
