import { render } from "./render.js";
import { spider } from "./spider.js";
document.title = "stadia.observer";
document.head.appendChild(
  Object.assign(document.createElement("link"), {
    rel: "icon",
    href: "/illufinch-violetsky-edited@4x.png",
  })
);
const Home = ({ buttons, games }) =>
  render(
    "section",
    null,
    render(
      "h1",
      null,
      render("img", { src: "/illufinch-violetsky-edited@4x.png" }),
      render("slot", { name: "title" }, "stadia.observer")
    ),
    window.chrome?.runtime?.id &&
      render(
        "button",
        { onclick: () => spider() },
        "\uD83D\uDD77\uFE0Fspider stadia"
      ),
    render("section", null, buttons),
    render(
      "section",
      null,
      games.map((game) => render(Game, Object.assign({}, game)))
    )
  );
const Game = ({ name }) => render("section", null, render("h2", null, name));
(async () => {
  const skus = Object.values(await (await fetch("/skus.json")).json());
  const skusById = Object.fromEntries(skus.map((sku) => [sku.sku, sku]));
  const subscriptions = skus.filter((sku) => sku.type === "subscription");
  const games = skus
    .filter((sku) => sku.type === "game")
    .map((game) =>
      Object.assign(game, {
        skus: skus.filter((sku) => sku.app === game.app),
        addons: skus.filter(
          (sku) => sku.app === game.app && sku.type === "addon"
        ),
        bundles: skus.filter(
          (sku) => sku.app === game.app && sku.type === "bundle"
        ),
      })
    );
  document.body.appendChild(render(Home, { games: games }));
})();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiLi8iLCJzb3VyY2VzIjpbImluZGV4LnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsTUFBTSxFQUFFLE1BQU0sYUFBYSxDQUFDO0FBQ3JDLE9BQU8sRUFBRSxNQUFNLEVBQUUsTUFBTSxhQUFhLENBQUM7QUFFckMsUUFBUSxDQUFDLEtBQUssR0FBRyxpQkFBaUIsQ0FBQztBQUNuQyxRQUFRLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FDdkIsTUFBTSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsYUFBYSxDQUFDLE1BQU0sQ0FBQyxFQUFFO0lBQzVDLEdBQUcsRUFBRSxNQUFNO0lBQ1gsSUFBSSxFQUFFLG9DQUFvQztDQUMzQyxDQUFDLENBQ0gsQ0FBQztBQUVGLE1BQU0sSUFBSSxHQUFHLENBQUMsRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQ25DO0lBQ0U7UUFDRSxnQkFBSyxHQUFHLEVBQUMsb0NBQW9DLEdBQUc7UUFDaEQsaUJBQU0sSUFBSSxFQUFDLE9BQU8sc0JBQXVCLENBQ3RDO0lBRUosTUFBTSxDQUFDLE1BQU0sRUFBRSxPQUFPLEVBQUUsRUFBRSxJQUFJLENBQzdCLG1CQUFRLE9BQU8sRUFBRSxHQUFHLEVBQUUsQ0FBQyxNQUFNLEVBQUUsc0NBQTJCLENBQzNEO0lBQ0Qsd0JBQVUsT0FBTyxDQUFXO0lBRTVCLHdCQUNHLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLEVBQUUsRUFBRSxDQUFDLENBQ25CLE9BQUMsSUFBSSxvQkFBSyxJQUFJLEVBQUksQ0FDbkIsQ0FBQyxDQUNNLENBQ0YsQ0FDWCxDQUFDO0FBRUYsTUFBTSxJQUFJLEdBQUcsQ0FBQyxFQUFFLElBQUksRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUN6QjtJQUNFLG1CQUFLLElBQUksQ0FBTSxDQUNQLENBQ1gsQ0FBQztBQUVGLENBQUMsS0FBSyxJQUFJLEVBQUU7SUFDVixNQUFNLElBQUksR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxNQUFNLEtBQUssQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDLENBQUM7SUFDckUsTUFBTSxRQUFRLEdBQUcsTUFBTSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ3ZFLE1BQU0sYUFBYSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxHQUFHLEVBQUUsRUFBRSxDQUFDLEdBQUcsQ0FBQyxJQUFJLEtBQUssY0FBYyxDQUFDLENBQUM7SUFFeEUsTUFBTSxLQUFLLEdBQUcsSUFBSTtTQUNmLE1BQU0sQ0FBQyxDQUFDLEdBQUcsRUFBRSxFQUFFLENBQUMsR0FBRyxDQUFDLElBQUksS0FBSyxNQUFNLENBQUM7U0FDcEMsR0FBRyxDQUFDLENBQUMsSUFBSSxFQUFFLEVBQUUsQ0FDWixNQUFNLENBQUMsTUFBTSxDQUFDLElBQUksRUFBRTtRQUNsQixJQUFJLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsRUFBRSxFQUFFLENBQUMsR0FBRyxDQUFDLEdBQUcsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDO1FBQ2hELE1BQU0sRUFBRSxJQUFJLENBQUMsTUFBTSxDQUNqQixDQUFDLEdBQUcsRUFBRSxFQUFFLENBQUMsR0FBRyxDQUFDLEdBQUcsS0FBSyxJQUFJLENBQUMsR0FBRyxJQUFJLEdBQUcsQ0FBQyxJQUFJLEtBQUssT0FBTyxDQUN0RDtRQUNELE9BQU8sRUFBRSxJQUFJLENBQUMsTUFBTSxDQUNsQixDQUFDLEdBQUcsRUFBRSxFQUFFLENBQUMsR0FBRyxDQUFDLEdBQUcsS0FBSyxJQUFJLENBQUMsR0FBRyxJQUFJLEdBQUcsQ0FBQyxJQUFJLEtBQUssUUFBUSxDQUN2RDtLQUNGLENBQUMsQ0FDSCxDQUFDO0lBRUosUUFBUSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsT0FBQyxJQUFJLElBQUMsS0FBSyxFQUFFLEtBQUssR0FBSSxDQUFDLENBQUM7QUFDcEQsQ0FBQyxDQUFDLEVBQUUsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHJlbmRlciB9IGZyb20gXCIuL3JlbmRlci5qc1wiO1xuaW1wb3J0IHsgc3BpZGVyIH0gZnJvbSBcIi4vc3BpZGVyLmpzXCI7XG5cbmRvY3VtZW50LnRpdGxlID0gXCJzdGFkaWEub2JzZXJ2ZXJcIjtcbmRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoXG4gIE9iamVjdC5hc3NpZ24oZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpbmtcIiksIHtcbiAgICByZWw6IFwiaWNvblwiLFxuICAgIGhyZWY6IFwiL2lsbHVmaW5jaC12aW9sZXRza3ktZWRpdGVkQDR4LnBuZ1wiLFxuICB9KVxuKTtcblxuY29uc3QgSG9tZSA9ICh7IGJ1dHRvbnMsIGdhbWVzIH0pID0+IChcbiAgPHNlY3Rpb24+XG4gICAgPGgxPlxuICAgICAgPGltZyBzcmM9XCIvaWxsdWZpbmNoLXZpb2xldHNreS1lZGl0ZWRANHgucG5nXCIgLz5cbiAgICAgIDxzbG90IG5hbWU9XCJ0aXRsZVwiPnN0YWRpYS5vYnNlcnZlcjwvc2xvdD5cbiAgICA8L2gxPlxuXG4gICAge3dpbmRvdy5jaHJvbWU/LnJ1bnRpbWU/LmlkICYmIChcbiAgICAgIDxidXR0b24gb25jbGljaz17KCkgPT4gc3BpZGVyKCl9PvCflbfvuI9zcGlkZXIgc3RhZGlhPC9idXR0b24+XG4gICAgKX1cbiAgICA8c2VjdGlvbj57YnV0dG9uc308L3NlY3Rpb24+XG5cbiAgICA8c2VjdGlvbj5cbiAgICAgIHtnYW1lcy5tYXAoKGdhbWUpID0+IChcbiAgICAgICAgPEdhbWUgey4uLmdhbWV9IC8+XG4gICAgICApKX1cbiAgICA8L3NlY3Rpb24+XG4gIDwvc2VjdGlvbj5cbik7XG5cbmNvbnN0IEdhbWUgPSAoeyBuYW1lIH0pID0+IChcbiAgPHNlY3Rpb24+XG4gICAgPGgyPntuYW1lfTwvaDI+XG4gIDwvc2VjdGlvbj5cbik7XG5cbihhc3luYyAoKSA9PiB7XG4gIGNvbnN0IHNrdXMgPSBPYmplY3QudmFsdWVzKGF3YWl0IChhd2FpdCBmZXRjaChcIi9za3VzLmpzb25cIikpLmpzb24oKSk7XG4gIGNvbnN0IHNrdXNCeUlkID0gT2JqZWN0LmZyb21FbnRyaWVzKHNrdXMubWFwKChza3UpID0+IFtza3Uuc2t1LCBza3VdKSk7XG4gIGNvbnN0IHN1YnNjcmlwdGlvbnMgPSBza3VzLmZpbHRlcigoc2t1KSA9PiBza3UudHlwZSA9PT0gXCJzdWJzY3JpcHRpb25cIik7XG5cbiAgY29uc3QgZ2FtZXMgPSBza3VzXG4gICAgLmZpbHRlcigoc2t1KSA9PiBza3UudHlwZSA9PT0gXCJnYW1lXCIpXG4gICAgLm1hcCgoZ2FtZSkgPT5cbiAgICAgIE9iamVjdC5hc3NpZ24oZ2FtZSwge1xuICAgICAgICBza3VzOiBza3VzLmZpbHRlcigoc2t1KSA9PiBza3UuYXBwID09PSBnYW1lLmFwcCksXG4gICAgICAgIGFkZG9uczogc2t1cy5maWx0ZXIoXG4gICAgICAgICAgKHNrdSkgPT4gc2t1LmFwcCA9PT0gZ2FtZS5hcHAgJiYgc2t1LnR5cGUgPT09IFwiYWRkb25cIlxuICAgICAgICApLFxuICAgICAgICBidW5kbGVzOiBza3VzLmZpbHRlcihcbiAgICAgICAgICAoc2t1KSA9PiBza3UuYXBwID09PSBnYW1lLmFwcCAmJiBza3UudHlwZSA9PT0gXCJidW5kbGVcIlxuICAgICAgICApLFxuICAgICAgfSlcbiAgICApO1xuXG4gIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoPEhvbWUgZ2FtZXM9e2dhbWVzfSAvPik7XG59KSgpO1xuIl19
