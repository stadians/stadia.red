"use strict";
(async () => {
  document.title = "stadia.observer";
  document.head.appendChild(
    Object.assign(document.createElement("link"), {
      rel: "icon",
      href: "/illufinch-violetsky-edited@4x.png",
    })
  );
  const renderChild = (content) => {
    if (content === null || content === undefined) {
      return document.createElement("span");
    } else if (content instanceof Node) {
      return content;
    } else if (
      typeof content === "string" ||
      typeof content === "number" ||
      typeof content === "boolean"
    ) {
      return document.createTextNode(String(content));
    } else {
      const container = document.createDocumentFragment();
      for (const child of content) {
        container.appendChild(renderChild(child));
      }
      return container;
    }
  };
  const Home = ({ buttons, games }) =>
    render(
      "section",
      null,
      render(
        "h1",
        null,
        render("img", { src: "/illufinch-violetsky-edited@4x.png" }),
        render("slot", { name: "title" }, "stadia.observer")
      ),
      render("section", null, buttons),
      render(
        "section",
        null,
        games.map((game) => render(Game, Object.assign({}, game)))
      )
    );
  const Game = ({ name }) => render("section", null, render("h2", null, name));
  const render = (type, props, ...children) => {
    if (typeof type === "string") {
      const el = document.createElement(type);
      Object.assign(el, props);
      el.appendChild(renderChild(children));
      return el;
    } else {
      return type(Object.assign(props, { children }));
    }
  };
  const skus = Object.values(await (await fetch("/skus.json")).json());
  const skusById = Object.fromEntries(skus.map((sku) => [sku.sku, sku]));
  const subscriptions = skus.filter((sku) => sku.type === "subscription");
  const games = skus
    .filter((sku) => sku.type === "game")
    .map((game) =>
      Object.assign(game, {
        skus: skus.filter((sku) => sku.app === game.app),
        addons: skus.filter(
          (sku) => sku.app === game.app && sku.type === "addon"
        ),
        bundles: skus.filter(
          (sku) => sku.app === game.app && sku.type === "bundle"
        ),
      })
    );
  document.body.appendChild(
    render(Home, {
      buttons: render(
        "button",
        { onclick: () => import("/spider.js") },
        "\uD83D\uDD77\uFE0Fspider stadia"
      ),
      games: games,
    })
  );
})();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiLi8iLCJzb3VyY2VzIjpbImluZGV4LnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsQ0FBQyxLQUFLLElBQUksRUFBRTtJQUNWLFFBQVEsQ0FBQyxLQUFLLEdBQUcsaUJBQWlCLENBQUM7SUFDbkMsUUFBUSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQ3ZCLE1BQU0sQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLGFBQWEsQ0FBQyxNQUFNLENBQUMsRUFBRTtRQUM1QyxHQUFHLEVBQUUsTUFBTTtRQUNYLElBQUksRUFBRSxvQ0FBb0M7S0FDM0MsQ0FBQyxDQUNILENBQUM7SUFhRixNQUFNLFdBQVcsR0FBRyxDQUFDLE9BQW1CLEVBQVEsRUFBRTtRQUNoRCxJQUFJLE9BQU8sS0FBSyxJQUFJLElBQUksT0FBTyxLQUFLLFNBQVMsRUFBRTtZQUM3QyxPQUFPLFFBQVEsQ0FBQyxhQUFhLENBQUMsTUFBTSxDQUFDLENBQUM7U0FDdkM7YUFBTSxJQUFJLE9BQU8sWUFBWSxJQUFJLEVBQUU7WUFDbEMsT0FBTyxPQUFPLENBQUM7U0FDaEI7YUFBTSxJQUNMLE9BQU8sT0FBTyxLQUFLLFFBQVE7WUFDM0IsT0FBTyxPQUFPLEtBQUssUUFBUTtZQUMzQixPQUFPLE9BQU8sS0FBSyxTQUFTLEVBQzVCO1lBQ0EsT0FBTyxRQUFRLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDO1NBQ2pEO2FBQU07WUFDTCxNQUFNLFNBQVMsR0FBRyxRQUFRLENBQUMsc0JBQXNCLEVBQUUsQ0FBQztZQUNwRCxLQUFLLE1BQU0sS0FBSyxJQUFJLE9BQU8sRUFBRTtnQkFDM0IsU0FBUyxDQUFDLFdBQVcsQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQzthQUMzQztZQUNELE9BQU8sU0FBUyxDQUFDO1NBQ2xCO0lBQ0gsQ0FBQyxDQUFDO0lBRUYsTUFBTSxJQUFJLEdBQUcsQ0FBQyxFQUFFLE9BQU8sRUFB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QUFDSixDQUFDLENBQUMsRUFBRSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiKGFzeW5jICgpID0+IHtcbiAgZG9jdW1lbnQudGl0bGUgPSBcInN0YWRpYS5vYnNlcnZlclwiO1xuICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKFxuICAgIE9iamVjdC5hc3NpZ24oZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpbmtcIiksIHtcbiAgICAgIHJlbDogXCJpY29uXCIsXG4gICAgICBocmVmOiBcIi9pbGx1ZmluY2gtdmlvbGV0c2t5LWVkaXRlZEA0eC5wbmdcIixcbiAgICB9KVxuICApO1xuXG4gIHR5cGUgUmVuZGVyYWJsZSA9XG4gICAgfCBFbGVtZW50XG4gICAgfCBEb2N1bWVudEZyYWdtZW50XG4gICAgfCBOb2RlXG4gICAgfCBzdHJpbmdcbiAgICB8IG51bWJlclxuICAgIHwgYm9vbGVhblxuICAgIHwgbnVsbFxuICAgIHwgdW5kZWZpbmVkXG4gICAgfCBJdGVyYWJsZTxSZW5kZXJhYmxlPjtcblxuICBjb25zdCByZW5kZXJDaGlsZCA9IChjb250ZW50OiBSZW5kZXJhYmxlKTogTm9kZSA9PiB7XG4gICAgaWYgKGNvbnRlbnQgPT09IG51bGwgfHwgY29udGVudCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gICAgfSBlbHNlIGlmIChjb250ZW50IGluc3RhbmNlb2YgTm9kZSkge1xuICAgICAgcmV0dXJuIGNvbnRlbnQ7XG4gICAgfSBlbHNlIGlmIChcbiAgICAgIHR5cGVvZiBjb250ZW50ID09PSBcInN0cmluZ1wiIHx8XG4gICAgICB0eXBlb2YgY29udGVudCA9PT0gXCJudW1iZXJcIiB8fFxuICAgICAgdHlwZW9mIGNvbnRlbnQgPT09IFwiYm9vbGVhblwiXG4gICAgKSB7XG4gICAgICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoU3RyaW5nKGNvbnRlbnQpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICAgICAgZm9yIChjb25zdCBjaGlsZCBvZiBjb250ZW50KSB7XG4gICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChyZW5kZXJDaGlsZChjaGlsZCkpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGNvbnRhaW5lcjtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgSG9tZSA9ICh7IGJ1dHRvbnMsIGdhbWVzIH0pID0+IChcbiAgICA8c2VjdGlvbj5cbiAgICAgIDxoMT5cbiAgICAgICAgPGltZyBzcmM9XCIvaWxsdWZpbmNoLXZpb2xldHNreS1lZGl0ZWRANHgucG5nXCIgLz5cbiAgICAgICAgPHNsb3QgbmFtZT1cInRpdGxlXCI+c3RhZGlhLm9ic2VydmVyPC9zbG90PlxuICAgICAgPC9oMT5cblxuICAgICAgPHNlY3Rpb24+e2J1dHRvbnN9PC9zZWN0aW9uPlxuXG4gICAgICA8c2VjdGlvbj5cbiAgICAgICAge2dhbWVzLm1hcCgoZ2FtZSkgPT4gKFxuICAgICAgICAgIDxHYW1lIHsuLi5nYW1lfSAvPlxuICAgICAgICApKX1cbiAgICAgIDwvc2VjdGlvbj5cbiAgICA8L3NlY3Rpb24+XG4gICk7XG5cbiAgY29uc3QgR2FtZSA9ICh7IG5hbWUgfSkgPT4gKFxuICAgIDxzZWN0aW9uPlxuICAgICAgPGgyPntuYW1lfTwvaDI+XG4gICAgPC9zZWN0aW9uPlxuICApO1xuXG4gIGNvbnN0IHJlbmRlciA9IChcbiAgICB0eXBlOiBzdHJpbmcgfCAoKHByb3BzOiBSZWNvcmQ8c3RyaW5nLCBSZW5kZXJhYmxlPikgPT4gRWxlbWVudCksXG4gICAgcHJvcHM6IFJlY29yZDxzdHJpbmcsIGFueT4sXG4gICAgLi4uY2hpbGRyZW46IEFycmF5PFJlbmRlcmFibGU+XG4gICk6IEVsZW1lbnQgPT4ge1xuICAgIGlmICh0eXBlb2YgdHlwZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgY29uc3QgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHR5cGUpO1xuICAgICAgT2JqZWN0LmFzc2lnbihlbCwgcHJvcHMpO1xuICAgICAgZWwuYXBwZW5kQ2hpbGQocmVuZGVyQ2hpbGQoY2hpbGRyZW4pKTtcbiAgICAgIHJldHVybiBlbDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHR5cGUoT2JqZWN0LmFzc2lnbihwcm9wcywgeyBjaGlsZHJlbiB9KSk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IHNrdXMgPSBPYmplY3QudmFsdWVzKGF3YWl0IChhd2FpdCBmZXRjaChcIi9za3VzLmpzb25cIikpLmpzb24oKSk7XG4gIGNvbnN0IHNrdXNCeUlkID0gT2JqZWN0LmZyb21FbnRyaWVzKHNrdXMubWFwKChza3UpID0+IFtza3Uuc2t1LCBza3VdKSk7XG4gIGNvbnN0IHN1YnNjcmlwdGlvbnMgPSBza3VzLmZpbHRlcigoc2t1KSA9PiBza3UudHlwZSA9PT0gXCJzdWJzY3JpcHRpb25cIik7XG5cbiAgY29uc3QgZ2FtZXMgPSBza3VzXG4gICAgLmZpbHRlcigoc2t1KSA9PiBza3UudHlwZSA9PT0gXCJnYW1lXCIpXG4gICAgLm1hcCgoZ2FtZSkgPT5cbiAgICAgIE9iamVjdC5hc3NpZ24oZ2FtZSwge1xuICAgICAgICBza3VzOiBza3VzLmZpbHRlcigoc2t1KSA9PiBza3UuYXBwID09PSBnYW1lLmFwcCksXG4gICAgICAgIGFkZG9uczogc2t1cy5maWx0ZXIoXG4gICAgICAgICAgKHNrdSkgPT4gc2t1LmFwcCA9PT0gZ2FtZS5hcHAgJiYgc2t1LnR5cGUgPT09IFwiYWRkb25cIlxuICAgICAgICApLFxuICAgICAgICBidW5kbGVzOiBza3VzLmZpbHRlcihcbiAgICAgICAgICAoc2t1KSA9PiBza3UuYXBwID09PSBnYW1lLmFwcCAmJiBza3UudHlwZSA9PT0gXCJidW5kbGVcIlxuICAgICAgICApLFxuICAgICAgfSlcbiAgICApO1xuXG4gIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoXG4gICAgPEhvbWVcbiAgICAgIGJ1dHRvbnM9e1xuICAgICAgICA8YnV0dG9uIG9uY2xpY2s9eygpID0+IGltcG9ydChcIi9zcGlkZXIuanNcIil9PvCflbfvuI9zcGlkZXIgc3RhZGlhPC9idXR0b24+XG4gICAgICB9XG4gICAgICBnYW1lcz17Z2FtZXN9XG4gICAgLz5cbiAgKTtcbn0pKCk7XG4iXX0=
