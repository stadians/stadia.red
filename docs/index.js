import { render } from "./render.js";
document.title = "stadia.observer";
document.head.appendChild(
  Object.assign(document.createElement("link"), {
    rel: "icon",
    href: "/illufinch-violetsky-edited@2x.png",
  })
);
const Home = ({ buttons, games }) =>
  render(
    "section",
    null,
    render("h1", null, "stadia.observer"),
    window.chrome?.runtime?.id &&
      render(
        "button",
        { onclick: async () => (await import("./spider.js")).spider() },
        "\uD83D\uDD77\uFE0Fspider stadia"
      ),
    render("section", null, buttons),
    render(
      "section",
      null,
      games.map((game) => render(Game, Object.assign({}, game)))
    )
  );
const Game = ({ name }) => render("section", null, render("h2", null, name));
(async () => {
  const skus = Object.values(await (await fetch("/skus.json")).json());
  const skusById = Object.fromEntries(skus.map((sku) => [sku.sku, sku]));
  const subscriptions = skus.filter((sku) => sku.type === "subscription");
  const games = skus
    .filter((sku) => sku.type === "game")
    .map((game) =>
      Object.assign(game, {
        skus: skus.filter((sku) => sku.app === game.app),
        addons: skus.filter(
          (sku) => sku.app === game.app && sku.type === "addon"
        ),
        bundles: skus.filter(
          (sku) => sku.app === game.app && sku.type === "bundle"
        ),
      })
    );
  document.body.appendChild(render(Home, { games: games }));
})();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiLi8iLCJzb3VyY2VzIjpbImluZGV4LnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsTUFBTSxFQUFFLE1BQU0sYUFBYSxDQUFDO0FBRXJDLFFBQVEsQ0FBQyxLQUFLLEdBQUcsaUJBQWlCLENBQUM7QUFDbkMsUUFBUSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQ3ZCLE1BQU0sQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLGFBQWEsQ0FBQyxNQUFNLENBQUMsRUFBRTtJQUM1QyxHQUFHLEVBQUUsTUFBTTtJQUNYLElBQUksRUFBRSxvQ0FBb0M7Q0FDM0MsQ0FBQyxDQUNILENBQUM7QUFFRixNQUFNLElBQUksR0FBRyxDQUFDLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUNuQztJQUNFLHFDQUF3QjtJQUV2QixNQUFNLENBQUMsTUFBTSxFQUFFLE9BQU8sRUFBRSxFQUFFLElBQUksQ0FDN0IsbUJBQVEsT0FBTyxFQUFFLEtBQUssSUFBSSxFQUFFLENBQUMsQ0FBQyxNQUFNLE1BQU0sQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDLE1BQU0sRUFBRSxzQ0FFMUQsQ0FDVjtJQUNELHdCQUFVLE9BQU8sQ0FBVztJQUU1Qix3QkFDRyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxFQUFFLEVBQUUsQ0FBQyxDQUNuQixPQUFDLElBQUksb0JBQUssSUFBSSxFQUFJLENBQ25CLENBQUMsQ0FDTSxDQUNGLENBQ1gsQ0FBQztBQUVGLE1BQU0sSUFBSSxHQUFHLENBQUMsRUFBRSxJQUFJLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FDekI7SUFDRSxtQkFBSyxJQUFJLENBQU0sQ0FDUCxDQUNYLENBQUM7QUFFRixDQUFDLEtBQUssSUFBSSxFQUFFO0lBQ1YsTUFBTSxJQUFJLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsTUFBTSxLQUFLLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDO0lBQ3JFLE1BQU0sUUFBUSxHQUFHLE1BQU0sQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsRUFBRSxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUN2RSxNQUFNLGFBQWEsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsR0FBRyxFQUFFLEVBQUUsQ0FBQyxHQUFHLENBQUMsSUFBSSxLQUFLLGNBQWMsQ0FBQyxDQUFDO0lBRXhFLE1BQU0sS0FBSyxHQUFHLElBQUk7U0FDZixNQUFNLENBQUMsQ0FBQyxHQUFHLEVBQUUsRUFBRSxDQUFDLEdBQUcsQ0FBQyxJQUFJLEtBQUssTUFBTSxDQUFDO1NBQ3BDLEdBQUcsQ0FBQyxDQUFDLElBQUksRUFBRSxFQUFFLENBQ1osTUFBTSxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUU7UUFDbEIsSUFBSSxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxHQUFHLEVBQUUsRUFBRSxDQUFDLEdBQUcsQ0FBQyxHQUFHLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQztRQUNoRCxNQUFNLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FDakIsQ0FBQyxHQUFHLEVBQUUsRUFBRSxDQUFDLEdBQUcsQ0FBQyxHQUFHLEtBQUssSUFBSSxDQUFDLEdBQUcsSUFBSSxHQUFHLENBQUMsSUFBSSxLQUFLLE9BQU8sQ0FDdEQ7UUFDRCxPQUFPLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FDbEIsQ0FBQyxHQUFHLEVBQUUsRUFBRSxDQUFDLEdBQUcsQ0FBQyxHQUFHLEtBQUssSUFBSSxDQUFDLEdBQUcsSUFBSSxHQUFHLENBQUMsSUFBSSxLQUFLLFFBQVEsQ0FDdkQ7S0FDRixDQUFDLENBQ0gsQ0FBQztJQUVKLFFBQVEsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLE9BQUMsSUFBSSxJQUFDLEtBQUssRUFBRSxLQUFLLEdBQUksQ0FBQyxDQUFDO0FBQ3BELENBQUMsQ0FBQyxFQUFFLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyByZW5kZXIgfSBmcm9tIFwiLi9yZW5kZXIuanNcIjtcblxuZG9jdW1lbnQudGl0bGUgPSBcInN0YWRpYS5vYnNlcnZlclwiO1xuZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChcbiAgT2JqZWN0LmFzc2lnbihkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlua1wiKSwge1xuICAgIHJlbDogXCJpY29uXCIsXG4gICAgaHJlZjogXCIvaWxsdWZpbmNoLXZpb2xldHNreS1lZGl0ZWRAMngucG5nXCIsXG4gIH0pXG4pO1xuXG5jb25zdCBIb21lID0gKHsgYnV0dG9ucywgZ2FtZXMgfSkgPT4gKFxuICA8c2VjdGlvbj5cbiAgICA8aDE+c3RhZGlhLm9ic2VydmVyPC9oMT5cblxuICAgIHt3aW5kb3cuY2hyb21lPy5ydW50aW1lPy5pZCAmJiAoXG4gICAgICA8YnV0dG9uIG9uY2xpY2s9e2FzeW5jICgpID0+IChhd2FpdCBpbXBvcnQoXCIuL3NwaWRlci5qc1wiKSkuc3BpZGVyKCl9PlxuICAgICAgICDwn5W377iPc3BpZGVyIHN0YWRpYVxuICAgICAgPC9idXR0b24+XG4gICAgKX1cbiAgICA8c2VjdGlvbj57YnV0dG9uc308L3NlY3Rpb24+XG5cbiAgICA8c2VjdGlvbj5cbiAgICAgIHtnYW1lcy5tYXAoKGdhbWUpID0+IChcbiAgICAgICAgPEdhbWUgey4uLmdhbWV9IC8+XG4gICAgICApKX1cbiAgICA8L3NlY3Rpb24+XG4gIDwvc2VjdGlvbj5cbik7XG5cbmNvbnN0IEdhbWUgPSAoeyBuYW1lIH0pID0+IChcbiAgPHNlY3Rpb24+XG4gICAgPGgyPntuYW1lfTwvaDI+XG4gIDwvc2VjdGlvbj5cbik7XG5cbihhc3luYyAoKSA9PiB7XG4gIGNvbnN0IHNrdXMgPSBPYmplY3QudmFsdWVzKGF3YWl0IChhd2FpdCBmZXRjaChcIi9za3VzLmpzb25cIikpLmpzb24oKSk7XG4gIGNvbnN0IHNrdXNCeUlkID0gT2JqZWN0LmZyb21FbnRyaWVzKHNrdXMubWFwKChza3UpID0+IFtza3Uuc2t1LCBza3VdKSk7XG4gIGNvbnN0IHN1YnNjcmlwdGlvbnMgPSBza3VzLmZpbHRlcigoc2t1KSA9PiBza3UudHlwZSA9PT0gXCJzdWJzY3JpcHRpb25cIik7XG5cbiAgY29uc3QgZ2FtZXMgPSBza3VzXG4gICAgLmZpbHRlcigoc2t1KSA9PiBza3UudHlwZSA9PT0gXCJnYW1lXCIpXG4gICAgLm1hcCgoZ2FtZSkgPT5cbiAgICAgIE9iamVjdC5hc3NpZ24oZ2FtZSwge1xuICAgICAgICBza3VzOiBza3VzLmZpbHRlcigoc2t1KSA9PiBza3UuYXBwID09PSBnYW1lLmFwcCksXG4gICAgICAgIGFkZG9uczogc2t1cy5maWx0ZXIoXG4gICAgICAgICAgKHNrdSkgPT4gc2t1LmFwcCA9PT0gZ2FtZS5hcHAgJiYgc2t1LnR5cGUgPT09IFwiYWRkb25cIlxuICAgICAgICApLFxuICAgICAgICBidW5kbGVzOiBza3VzLmZpbHRlcihcbiAgICAgICAgICAoc2t1KSA9PiBza3UuYXBwID09PSBnYW1lLmFwcCAmJiBza3UudHlwZSA9PT0gXCJidW5kbGVcIlxuICAgICAgICApLFxuICAgICAgfSlcbiAgICApO1xuXG4gIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoPEhvbWUgZ2FtZXM9e2dhbWVzfSAvPik7XG59KSgpO1xuIl19
