import { localKey } from "./local-key.js";
export class Prices {
  constructor(
    countryCode,
    currencyCode,
    proPriceCents = null,
    proSalePriceCents = null,
    basePriceCents = null,
    baseSalePriceCents = null
  ) {
    this.countryCode = countryCode;
    this.currencyCode = currencyCode;
    this.proPriceCents = proPriceCents;
    this.proSalePriceCents = proSalePriceCents;
    this.basePriceCents = basePriceCents;
    this.baseSalePriceCents = baseSalePriceCents;
  }
  static fromProto(data) {
    let countryCode = "??";
    let currencyCode = "???";
    let proPriceCents = null;
    let proSalePriceCents = null;
    let basePriceCents = null;
    let baseSalePriceCents = null;
    const priceScale = 10000;
    for (const priceData of data) {
      if (priceData[3]) countryCode = priceData[3];
      if (priceData[4]) currencyCode = priceData[4];
      let _timeSpan = [priceData[11], priceData[12]];
      let potentialBasePrice = data[6]?.[0] ? data[6][0] / priceScale : null;
      let potentialProPrice = data[6]?.[2]?.[0]
        ? data[6][2][0] / priceScale
        : null;
      if (potentialBasePrice) basePriceCents = potentialBasePrice;
      if (potentialProPrice) proPriceCents = potentialProPrice;
    }
    return new Prices(
      countryCode,
      currencyCode,
      proPriceCents,
      proSalePriceCents,
      basePriceCents,
      baseSalePriceCents
    );
  }
}
export class CommonSku {
  constructor(app, sku, type, name, internalSlug, description, prices) {
    this.app = app;
    this.sku = sku;
    this.type = type;
    this.name = name;
    this.internalSlug = internalSlug;
    this.description = description;
    this.prices = prices;
    this.localKey = localKey(this);
  }
}
export class Game extends CommonSku {
  constructor(
    app,
    sku,
    type = "game",
    name,
    internalSlug,
    description,
    prices
  ) {
    super(app, sku, type, name, internalSlug, description, prices);
    this.type = type;
    this.prices = prices;
  }
}
export class AddOn extends CommonSku {
  constructor(
    app,
    sku,
    type = "addon",
    name,
    internalSlug,
    description,
    prices
  ) {
    super(app, sku, type, name, internalSlug, description, prices);
    this.type = type;
  }
}
export class Bundle extends CommonSku {
  constructor(
    app,
    sku,
    type = "bundle",
    name,
    internalSlug,
    description,
    prices,
    skus
  ) {
    super(app, sku, type, name, internalSlug, description, prices);
    this.type = type;
    this.skus = skus;
  }
}
export class Subscription extends CommonSku {
  constructor(
    app,
    sku,
    type = "subscription",
    name,
    internalSlug,
    description,
    prices,
    skus
  ) {
    super(app, sku, type, name, internalSlug, description, prices);
    this.type = type;
    this.skus = skus;
  }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kZWxzLmpzIiwic291cmNlUm9vdCI6Ii4vIiwic291cmNlcyI6WyJpbmRleC9kYXRhL21vZGVscy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQSxPQUFPLEVBQUUsUUFBUSxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFJMUMsTUFBTSxPQUFPLE1BQU07SUFDakIsWUFDVyxXQUFtQyxFQUNuQyxZQUFvQyxFQUNwQyxnQkFBK0IsSUFBSSxFQUNuQyxvQkFBbUMsSUFBSSxFQUN2QyxpQkFBZ0MsSUFBSSxFQUNwQyxxQkFBb0MsSUFBSTtRQUx4QyxnQkFBVyxHQUFYLFdBQVcsQ0FBd0I7UUFDbkMsaUJBQVksR0FBWixZQUFZLENBQXdCO1FBQ3BDLGtCQUFhLEdBQWIsYUFBYSxDQUFzQjtRQUNuQyxzQkFBaUIsR0FBakIsaUJBQWlCLENBQXNCO1FBQ3ZDLG1CQUFjLEdBQWQsY0FBYyxDQUFzQjtRQUNwQyx1QkFBa0IsR0FBbEIsa0JBQWtCLENBQXNCO0lBQ2hELENBQUM7SUFFRyxNQUFNLENBQUMsU0FBUyxDQUFDLElBQWU7UUFDckMsSUFBSSxXQUFXLEdBQTJCLElBQVcsQ0FBQztRQUN0RCxJQUFJLFlBQVksR0FBMkIsS0FBWSxDQUFDO1FBQ3hELElBQUksYUFBYSxHQUFHLElBQUksQ0FBQztRQUN6QixJQUFJLGlCQUFpQixHQUFHLElBQUksQ0FBQztRQUM3QixJQUFJLGNBQWMsR0FBRyxJQUFJLENBQUM7UUFDMUIsSUFBSSxrQkFBa0IsR0FBRyxJQUFJLENBQUM7UUFDOUIsTUFBTSxVQUFVLEdBQUcsS0FBTSxDQUFDO1FBQzFCLEtBQUssTUFBTSxTQUFTLElBQUksSUFBSSxFQUFFO1lBQzVCLElBQUksU0FBUyxDQUFDLENBQUMsQ0FBQztnQkFBRSxXQUFXLEdBQUcsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQzdDLElBQUksU0FBUyxDQUFDLENBQUMsQ0FBQztnQkFBRSxZQUFZLEdBQUcsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBRTlDLElB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U0FBUSxTQUFTO0lBQ3pDLFlBQ0UsR0FBVyxFQUNYLEdBQVcsRUFDRixPQUFPLGNBQXVCLEVBQ3ZDLElBQVksRUFDWixZQUFvQixFQUNwQixXQUFtQixFQUNuQixNQUFjLEVBQ0wsSUFBbUI7UUFFNUIsS0FBSyxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxZQUFZLEVBQUUsV0FBVyxFQUFFLE1BQU0sQ0FBQyxDQUFDO1FBUHRELFNBQUksR0FBSixJQUFJLENBQTBCO1FBSzlCLFNBQUksR0FBSixJQUFJLENBQWU7SUFHOUIsQ0FBQztDQUNGIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUHJvdG9EYXRhIH0gZnJvbSBcIi4uL3N0YWRpYS5qc1wiO1xuaW1wb3J0IHsgbG9jYWxLZXkgfSBmcm9tIFwiLi9sb2NhbC1rZXkuanNcIjtcblxuZXhwb3J0IHR5cGUgU2t1ID0gR2FtZSB8IEFkZE9uIHwgQnVuZGxlIHwgU3Vic2NyaXB0aW9uO1xuXG5leHBvcnQgY2xhc3MgUHJpY2VzIHtcbiAgcHJpdmF0ZSBjb25zdHJ1Y3RvcihcbiAgICByZWFkb25seSBjb3VudHJ5Q29kZTogc3RyaW5nICYgeyBsZW5ndGg6IDIgfSxcbiAgICByZWFkb25seSBjdXJyZW5jeUNvZGU6IHN0cmluZyAmIHsgbGVuZ3RoOiAzIH0sXG4gICAgcmVhZG9ubHkgcHJvUHJpY2VDZW50czogbnVtYmVyIHwgbnVsbCA9IG51bGwsXG4gICAgcmVhZG9ubHkgcHJvU2FsZVByaWNlQ2VudHM6IG51bWJlciB8IG51bGwgPSBudWxsLFxuICAgIHJlYWRvbmx5IGJhc2VQcmljZUNlbnRzOiBudW1iZXIgfCBudWxsID0gbnVsbCxcbiAgICByZWFkb25seSBiYXNlU2FsZVByaWNlQ2VudHM6IG51bWJlciB8IG51bGwgPSBudWxsXG4gICkge31cblxuICBwdWJsaWMgc3RhdGljIGZyb21Qcm90byhkYXRhOiBQcm90b0RhdGEpOiBQcmljZXMge1xuICAgIGxldCBjb3VudHJ5Q29kZTogc3RyaW5nICYgeyBsZW5ndGg6IDIgfSA9IFwiPz9cIiBhcyBhbnk7XG4gICAgbGV0IGN1cnJlbmN5Q29kZTogc3RyaW5nICYgeyBsZW5ndGg6IDMgfSA9IFwiPz8/XCIgYXMgYW55O1xuICAgIGxldCBwcm9QcmljZUNlbnRzID0gbnVsbDtcbiAgICBsZXQgcHJvU2FsZVByaWNlQ2VudHMgPSBudWxsO1xuICAgIGxldCBiYXNlUHJpY2VDZW50cyA9IG51bGw7XG4gICAgbGV0IGJhc2VTYWxlUHJpY2VDZW50cyA9IG51bGw7XG4gICAgY29uc3QgcHJpY2VTY2FsZSA9IDEwXzAwMDtcbiAgICBmb3IgKGNvbnN0IHByaWNlRGF0YSBvZiBkYXRhKSB7XG4gICAgICBpZiAocHJpY2VEYXRhWzNdKSBjb3VudHJ5Q29kZSA9IHByaWNlRGF0YVszXTtcbiAgICAgIGlmIChwcmljZURhdGFbNF0pIGN1cnJlbmN5Q29kZSA9IHByaWNlRGF0YVs0XTtcblxuICAgICAgbGV0IF90aW1lU3BhbiA9IFtwcmljZURhdGFbMTFdLCBwcmljZURhdGFbMTJdXTtcblxuICAgICAgbGV0IHBvdGVudGlhbEJhc2VQcmljZSA9IGRhdGFbNl0/LlswXSA/IGRhdGFbNl1bMF0gLyBwcmljZVNjYWxlIDogbnVsbDtcbiAgICAgIGxldCBwb3RlbnRpYWxQcm9QcmljZSA9IGRhdGFbNl0/LlsyXT8uWzBdXG4gICAgICAgID8gZGF0YVs2XVsyXVswXSAvIHByaWNlU2NhbGVcbiAgICAgICAgOiBudWxsO1xuXG4gICAgICBpZiAocG90ZW50aWFsQmFzZVByaWNlKSBiYXNlUHJpY2VDZW50cyA9IHBvdGVudGlhbEJhc2VQcmljZTtcbiAgICAgIGlmIChwb3RlbnRpYWxQcm9QcmljZSkgcHJvUHJpY2VDZW50cyA9IHBvdGVudGlhbFByb1ByaWNlO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IFByaWNlcyhcbiAgICAgIGNvdW50cnlDb2RlLFxuICAgICAgY3VycmVuY3lDb2RlLFxuICAgICAgcHJvUHJpY2VDZW50cyxcbiAgICAgIHByb1NhbGVQcmljZUNlbnRzLFxuICAgICAgYmFzZVByaWNlQ2VudHMsXG4gICAgICBiYXNlU2FsZVByaWNlQ2VudHNcbiAgICApO1xuICB9XG59XG5cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBDb21tb25Ta3Uge1xuICBjb25zdHJ1Y3RvcihcbiAgICByZWFkb25seSBhcHA6IHN0cmluZyxcbiAgICByZWFkb25seSBza3U6IHN0cmluZyxcbiAgICByZWFkb25seSB0eXBlOiBcImdhbWVcIiB8IFwiYWRkb25cIiB8IFwiYnVuZGxlXCIgfCBcInN1YnNjcmlwdGlvblwiLFxuICAgIHJlYWRvbmx5IG5hbWU6IHN0cmluZyxcbiAgICByZWFkb25seSBpbnRlcm5hbFNsdWc6IHN0cmluZyxcbiAgICByZWFkb25seSBkZXNjcmlwdGlvbjogc3RyaW5nLFxuICAgIHJlYWRvbmx5IHByaWNlczogUHJpY2VzXG4gICkge1xuICAgIHRoaXMubG9jYWxLZXkgPSBsb2NhbEtleSh0aGlzKTtcbiAgfVxuICByZWFkb25seSBsb2NhbEtleTogc3RyaW5nO1xufVxuXG5leHBvcnQgY2xhc3MgR2FtZSBleHRlbmRzIENvbW1vblNrdSB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIGFwcDogc3RyaW5nLFxuICAgIHNrdTogc3RyaW5nLFxuICAgIHJlYWRvbmx5IHR5cGUgPSBcImdhbWVcIiBhcyBjb25zdCxcbiAgICBuYW1lOiBzdHJpbmcsXG4gICAgaW50ZXJuYWxTbHVnOiBzdHJpbmcsXG4gICAgZGVzY3JpcHRpb246IHN0cmluZyxcbiAgICByZWFkb25seSBwcmljZXM6IFByaWNlc1xuICApIHtcbiAgICBzdXBlcihhcHAsIHNrdSwgdHlwZSwgbmFtZSwgaW50ZXJuYWxTbHVnLCBkZXNjcmlwdGlvbiwgcHJpY2VzKTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgQWRkT24gZXh0ZW5kcyBDb21tb25Ta3Uge1xuICBjb25zdHJ1Y3RvcihcbiAgICBhcHA6IHN0cmluZyxcbiAgICBza3U6IHN0cmluZyxcbiAgICByZWFkb25seSB0eXBlID0gXCJhZGRvblwiIGFzIGNvbnN0LFxuICAgIG5hbWU6IHN0cmluZyxcbiAgICBpbnRlcm5hbFNsdWc6IHN0cmluZyxcbiAgICBkZXNjcmlwdGlvbjogc3RyaW5nLFxuICAgIHByaWNlczogUHJpY2VzXG4gICkge1xuICAgIHN1cGVyKGFwcCwgc2t1LCB0eXBlLCBuYW1lLCBpbnRlcm5hbFNsdWcsIGRlc2NyaXB0aW9uLCBwcmljZXMpO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBCdW5kbGUgZXh0ZW5kcyBDb21tb25Ta3Uge1xuICBjb25zdHJ1Y3RvcihcbiAgICBhcHA6IHN0cmluZyxcbiAgICBza3U6IHN0cmluZyxcbiAgICByZWFkb25seSB0eXBlID0gXCJidW5kbGVcIiBhcyBjb25zdCxcbiAgICBuYW1lOiBzdHJpbmcsXG4gICAgaW50ZXJuYWxTbHVnOiBzdHJpbmcsXG4gICAgZGVzY3JpcHRpb246IHN0cmluZyxcbiAgICBwcmljZXM6IFByaWNlcyxcbiAgICByZWFkb25seSBza3VzOiBBcnJheTxzdHJpbmc+XG4gICkge1xuICAgIHN1cGVyKGFwcCwgc2t1LCB0eXBlLCBuYW1lLCBpbnRlcm5hbFNsdWcsIGRlc2NyaXB0aW9uLCBwcmljZXMpO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBTdWJzY3JpcHRpb24gZXh0ZW5kcyBDb21tb25Ta3Uge1xuICBjb25zdHJ1Y3RvcihcbiAgICBhcHA6IHN0cmluZyxcbiAgICBza3U6IHN0cmluZyxcbiAgICByZWFkb25seSB0eXBlID0gXCJzdWJzY3JpcHRpb25cIiBhcyBjb25zdCxcbiAgICBuYW1lOiBzdHJpbmcsXG4gICAgaW50ZXJuYWxTbHVnOiBzdHJpbmcsXG4gICAgZGVzY3JpcHRpb246IHN0cmluZyxcbiAgICBwcmljZXM6IFByaWNlcyxcbiAgICByZWFkb25seSBza3VzOiBBcnJheTxzdHJpbmc+XG4gICkge1xuICAgIHN1cGVyKGFwcCwgc2t1LCB0eXBlLCBuYW1lLCBpbnRlcm5hbFNsdWcsIGRlc2NyaXB0aW9uLCBwcmljZXMpO1xuICB9XG59XG4iXX0=
