import "./foreground/autoreload.js";
import "./foreground/jsx.js";
import * as views from "./foreground/views.js";
import { fragment } from "./foreground/jsx.js";
import { localKey } from "./foreground/data/local-key.js";
export const main = async () => {
  document.head.appendChild(
    fragment(
      JSX.createElement("title", null, "stadia.observer"),
      JSX.createElement("link", {
        rel: "icon",
        href: "/illufinch-violetsky-edited@2x.png",
      }),
    ),
  );
  // TODO: associate prototypes, these are plain Objects.
  const skus = Object.values(await (await fetch("/skus.json")).json());
  // re-sort in case we changed the key function
  skus.sort((a, b) => {
    let ap = localKey(a);
    let bp = localKey(b);
    if (ap < bp) {
      return -1;
    } else if (bp < ap) {
      return +1;
    } else {
      return 0;
    }
  });
  document.body.appendChild(JSX.createElement(views.Home, { skus: skus }));
};
main().catch(error => console.error("Unexpected error in main.", error));
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZm9yZWdyb3VuZC5qcyIsInNvdXJjZVJvb3QiOiIuLyIsInNvdXJjZXMiOlsiZm9yZWdyb3VuZC50c3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyw0QkFBNEIsQ0FBQztBQUNwQyxPQUFPLHFCQUFxQixDQUFDO0FBRzdCLE9BQU8sS0FBSyxLQUFLLE1BQU0sdUJBQXVCLENBQUM7QUFFL0MsT0FBTyxFQUFFLFFBQVEsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBQy9DLE9BQU8sRUFBRSxRQUFRLEVBQUUsTUFBTSxnQ0FBZ0MsQ0FBQztBQUUxRCxNQUFNLENBQUMsTUFBTSxJQUFJLEdBQUcsS0FBSyxJQUFJLEVBQUU7SUFDN0IsUUFBUSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQ3ZCLFFBQVEsQ0FDTixtREFBOEIsRUFDOUIsNEJBQU0sR0FBRyxFQUFDLE1BQU0sRUFBQyxJQUFJLEVBQUMsb0NBQW9DLEdBQUcsQ0FDOUQsQ0FDRixDQUFDO0lBRUYsdURBQXVEO0lBQ3ZELE1BQU0sSUFBSSxHQUFzQixNQUFNLENBQUMsTUFBTSxDQUMzQyxNQUFNLENBQUMsTUFBTSxLQUFLLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FDekMsQ0FBQztJQUVGLDhDQUE4QztJQUM5QyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFO1FBQ2pCLElBQUksRUFBRSxHQUFHLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNyQixJQUFJLEVBQUUsR0FBRyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDckIsSUFBSSxFQUFFLEdBQUcsRUFBRSxFQUFFO1lBQ1gsT0FBTyxDQUFDLENBQUMsQ0FBQztTQUNYO2FBQU0sSUFBSSxFQUFFLEdBQUcsRUFBRSxFQUFFO1lBQ2xCLE9BQU8sQ0FBQyxDQUFDLENBQUM7U0FDWDthQUFNO1lBQ0wsT0FBTyxDQUFDLENBQUM7U0FDVjtJQUNILENBQUMsQ0FBQyxDQUFDO0lBRUgsUUFBUSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsa0JBQUMsS0FBSyxDQUFDLElBQUksSUFBQyxJQUFJLEVBQUUsSUFBSSxHQUFJLENBQUMsQ0FBQztBQUN4RCxDQUFDLENBQUM7QUFFRixJQUFJLEVBQUUsQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLDJCQUEyQixFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgXCIuL2ZvcmVncm91bmQvYXV0b3JlbG9hZC5qc1wiO1xuaW1wb3J0IFwiLi9mb3JlZ3JvdW5kL2pzeC5qc1wiO1xuXG5pbXBvcnQgKiBhcyBtb2RlbHMgZnJvbSBcIi4vZm9yZWdyb3VuZC9kYXRhL21vZGVscy5qc1wiO1xuaW1wb3J0ICogYXMgdmlld3MgZnJvbSBcIi4vZm9yZWdyb3VuZC92aWV3cy5qc1wiO1xuXG5pbXBvcnQgeyBmcmFnbWVudCB9IGZyb20gXCIuL2ZvcmVncm91bmQvanN4LmpzXCI7XG5pbXBvcnQgeyBsb2NhbEtleSB9IGZyb20gXCIuL2ZvcmVncm91bmQvZGF0YS9sb2NhbC1rZXkuanNcIjtcblxuZXhwb3J0IGNvbnN0IG1haW4gPSBhc3luYyAoKSA9PiB7XG4gIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoXG4gICAgZnJhZ21lbnQoXG4gICAgICA8dGl0bGU+c3RhZGlhLm9ic2VydmVyPC90aXRsZT4sXG4gICAgICA8bGluayByZWw9XCJpY29uXCIgaHJlZj1cIi9pbGx1ZmluY2gtdmlvbGV0c2t5LWVkaXRlZEAyeC5wbmdcIiAvPixcbiAgICApLFxuICApO1xuXG4gIC8vIFRPRE86IGFzc29jaWF0ZSBwcm90b3R5cGVzLCB0aGVzZSBhcmUgcGxhaW4gT2JqZWN0cy5cbiAgY29uc3Qgc2t1czogQXJyYXk8bW9kZWxzLlNrdT4gPSBPYmplY3QudmFsdWVzKFxuICAgIGF3YWl0IChhd2FpdCBmZXRjaChcIi9za3VzLmpzb25cIikpLmpzb24oKSxcbiAgKTtcblxuICAvLyByZS1zb3J0IGluIGNhc2Ugd2UgY2hhbmdlZCB0aGUga2V5IGZ1bmN0aW9uXG4gIHNrdXMuc29ydCgoYSwgYikgPT4ge1xuICAgIGxldCBhcCA9IGxvY2FsS2V5KGEpO1xuICAgIGxldCBicCA9IGxvY2FsS2V5KGIpO1xuICAgIGlmIChhcCA8IGJwKSB7XG4gICAgICByZXR1cm4gLTE7XG4gICAgfSBlbHNlIGlmIChicCA8IGFwKSB7XG4gICAgICByZXR1cm4gKzE7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgfSk7XG5cbiAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCg8dmlld3MuSG9tZSBza3VzPXtza3VzfSAvPik7XG59O1xuXG5tYWluKCkuY2F0Y2goZXJyb3IgPT4gY29uc29sZS5lcnJvcihcIlVuZXhwZWN0ZWQgZXJyb3IgaW4gbWFpbi5cIiwgZXJyb3IpKTtcbiJdfQ==
