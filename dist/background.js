"use strict";
browser.browserAction.onClicked.addListener(async (activeTab) => {
    const url = browser.runtime.getURL("./.htm");
    console.log({ activeTab });
    if (activeTab.url === url) {
        return;
    }
    const matchingTabs = await browser.tabs.query({
        url: browser.runtime.getURL("*"),
    });
    if (matchingTabs.length > 0) {
        for (const [i, tab] of matchingTabs.sort((a, b) => a.id - b.id).entries()) {
            if (i === 0) {
                await browser.tabs.update(tab.id, {
                    highlighted: true,
                    active: true,
                });
                await browser.windows.update(tab.windowId, { focused: true });
            }
            else {
                browser.tabs.update(tab.id, { highlighted: true });
            }
        }
    }
    else {
        await browser.tabs.create({ url });
    }
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmFja2dyb3VuZC5qcyIsInNvdXJjZVJvb3QiOiIuLyIsInNvdXJjZXMiOlsiYmFja2dyb3VuZC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsT0FBTyxDQUFDLGFBQWEsQ0FBQyxTQUFTLENBQUMsV0FBVyxDQUFDLEtBQUssRUFBRSxTQUFjLEVBQUUsRUFBRTtJQUNuRSxNQUFNLEdBQUcsR0FBRyxPQUFPLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQztJQUU3QyxPQUFPLENBQUMsR0FBRyxDQUFDLEVBQUUsU0FBUyxFQUFFLENBQUMsQ0FBQztJQUUzQixJQUFJLFNBQVMsQ0FBQyxHQUFHLEtBQUssR0FBRyxFQUFFO1FBQ3pCLE9BQU87S0FDUjtJQUVELE1BQU0sWUFBWSxHQUFlLE1BQU0sT0FBTyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUM7UUFDeEQsR0FBRyxFQUFFLE9BQU8sQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQztLQUNqQyxDQUFDLENBQUM7SUFFSCxJQUFJLFlBQVksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFO1FBQzNCLEtBQUssTUFBTSxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsSUFBSSxZQUFZLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsT0FBTyxFQUFFLEVBQUU7WUFDekUsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFO2dCQUNYLE1BQU0sT0FBTyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLEVBQUUsRUFBRTtvQkFDaEMsV0FBVyxFQUFFLElBQUk7b0JBQ2pCLE1BQU0sRUFBRSxJQUFJO2lCQUNiLENBQUMsQ0FBQztnQkFDSCxNQUFNLE9BQU8sQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxRQUFRLEVBQUUsRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQzthQUMvRDtpQkFBTTtnQkFDTCxPQUFPLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsRUFBRSxFQUFFLEVBQUUsV0FBVyxFQUFFLElBQUksRUFBRSxDQUFDLENBQUM7YUFDcEQ7U0FDRjtLQUNGO1NBQU07UUFDTCxNQUFNLE9BQU8sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQztLQUNwQztBQUNILENBQUMsQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiYnJvd3Nlci5icm93c2VyQWN0aW9uLm9uQ2xpY2tlZC5hZGRMaXN0ZW5lcihhc3luYyAoYWN0aXZlVGFiOiBhbnkpID0+IHtcbiAgY29uc3QgdXJsID0gYnJvd3Nlci5ydW50aW1lLmdldFVSTChcIi4vLmh0bVwiKTtcblxuICBjb25zb2xlLmxvZyh7IGFjdGl2ZVRhYiB9KTtcblxuICBpZiAoYWN0aXZlVGFiLnVybCA9PT0gdXJsKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgY29uc3QgbWF0Y2hpbmdUYWJzOiBBcnJheTxhbnk+ID0gYXdhaXQgYnJvd3Nlci50YWJzLnF1ZXJ5KHtcbiAgICB1cmw6IGJyb3dzZXIucnVudGltZS5nZXRVUkwoXCIqXCIpLFxuICB9KTtcblxuICBpZiAobWF0Y2hpbmdUYWJzLmxlbmd0aCA+IDApIHtcbiAgICBmb3IgKGNvbnN0IFtpLCB0YWJdIG9mIG1hdGNoaW5nVGFicy5zb3J0KChhLCBiKSA9PiBhLmlkIC0gYi5pZCkuZW50cmllcygpKSB7XG4gICAgICBpZiAoaSA9PT0gMCkge1xuICAgICAgICBhd2FpdCBicm93c2VyLnRhYnMudXBkYXRlKHRhYi5pZCwge1xuICAgICAgICAgIGhpZ2hsaWdodGVkOiB0cnVlLFxuICAgICAgICAgIGFjdGl2ZTogdHJ1ZSxcbiAgICAgICAgfSk7XG4gICAgICAgIGF3YWl0IGJyb3dzZXIud2luZG93cy51cGRhdGUodGFiLndpbmRvd0lkLCB7IGZvY3VzZWQ6IHRydWUgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBicm93c2VyLnRhYnMudXBkYXRlKHRhYi5pZCwgeyBoaWdobGlnaHRlZDogdHJ1ZSB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgYXdhaXQgYnJvd3Nlci50YWJzLmNyZWF0ZSh7IHVybCB9KTtcbiAgfVxufSk7XG4iXX0=