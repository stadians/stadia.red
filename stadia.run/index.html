<!doctype html><meta charset="utf-8">

<title>stadia.run</title>
<link rel="canonical" href="https://stadia.run/" />
<link rel="icon" href="/-/squirrel-stadian.png" />

<style id="main-styles">
* {
  box-sizing: inherit;
  font: inherit;
  color: inherit;
  text-decoration: inherit;
  background: none;
  border: none;
  background-repeat: no-repeat;
  margin: 0;
  padding: 0;
  display: grid; /* should this be contents instead? */
}

/* root styles */
html:root {
  --background-color: #202124;
  --primary-color: #FFFFFF;
  --secondary-color: #D72D30;
  --mascot-url: url(/-/squirrel-stadian.png);
  --mascot-disabled-url: url(/-/squirrel-disabled.png);
  --mascot-generic-url: url(/-/squirrel-generic.png);
  --primary-font-size: 14px;
  --large-margin: 16px;
  --small-margin: 6px;
  /* We allow tiles to flow to full width, but want to keep any controls
     or body text within a narrower window. */

  --controls-width: 720px;
  --search-height: 64px;
  --search-font-size: 32px;

  font-family: sans-serif;
  box-sizing: border-box;
  font-size: var(--primary-font-size);
  background-color: var(--background-color);
  color: var(--primary-color);
  padding-bottom: 75vh;
}

script, style, link, head, template {
  display: none;
}

form {
  display: contents;
}

code {
  display: contents;
  font-family: monospace;
}

s {
  display: contents;
  text-decoration: line-through;
  text-decoration-color: rgba(128, 0, 0, 0.5);
  text-decoration-style: wavy;
  text-shadow:
    1px 0 2px rgba(0, 0, 0, 0.25),
    0 0 2px rgba(0, 0, 0, 0.25),
    0 0 3px rgba(0, 0, 0, 0.25),
    -1px 0 2px rgba(0, 0, 0, 0.25);
  color: rgba(0, 0, 0, 0.125);
}

*[hidden] {
  display: none;
}

button:enabled {
  cursor: pointer;
}

:disabled {
  cursor: not-allowed;
  opacity: 0.5;
}

main#main {
  grid-template-columns:
    [columns-main-start]
    var(--small-margin)
    [game-columns-start]
    1fr
    [controls-columns-start]
    var(--controls-width)
    [controls-columns-end]
    1fr
    [game-columns-end]
    var(--small-margin)
    [columns-main-end]
  ;
  grid-template-rows:
    [rows-main-start]
    var(--large-margin)
    [controls-rows-start]
    var(--search-height)
    [controls-rows-end]
    var(--large-margin)
    [games-rows-start]
    max-content
    [games-rows-end rows-main-end]
  ;
}

  main#main st-search {
    z-index: 10;
    grid-column: controls-columns-start / controls-columns-end;
    grid-row: controls-rows-start / controls-rows-end;

    grid-template-columns:
      [search-label-start]
      min-content
      [search-label-end]
      0
      [search-input-start]
      auto
      [search-input-end]
      var(--small-margin)
      [search-button-start]
      min-content
      [search-button-end]
      var(--small-margin)
      var(--search-height)
    ;
    grid-auto-rows: auto;

    font-size: var(--search-font-size);
    font-weight: bold;
    background-image: var(--mascot-url);
    background-size: var(--search-height);
    background-position: right;
  }

    main#main st-search span {
      display: block;
      grid-column: search-label-start / search-label-end;
      text-align: right;
      place-self: center right;
      color: var(--secondary-color);
      user-select: none;
    }

      main#main st-search span code {
        display: inline;
        font-family: monospace;
      }

    main#main st-search input {
      grid-column: search-input-start / search-input-end;
      caret-color: var(--secondary-color);
    }

      main#main st-search input::placeholder {
        color: inherit;
      }

      main#main st-search input:placeholder-shown {
        opacity: 0.5;
      }

      main#main st-search button {
      grid-column: search-button-start / search-button-end;
      align-items: center;
      color: var(--secondary-color);
      padding-top: 8px;
    }

      main#main st-search button kbd {
        font-size: calc(var(--search-font-size) / 2);
        display: inline;
        border: 2px solid currentColor;
        padding: 2px;
        border-radius: 4px;
      }

      main#main st-search button:disabled {
        color: #444;
      }

    main#main st-games {
      z-index: 5;
      grid-column: game-columns-start / game-columns-end;
      grid-row: games-rows-start / games-rows-end;
      grid-template-columns: repeat(auto-fill, 320px);
      grid-auto-rows: auto;
      gap: 16px 24px;
      margin: 32px;
      justify-content: center;
    }

      main#main st-games st-game {
        display: contents;
      }

        main#main st-games st-game a {
          grid-template-rows: [game-rows-start] auto [game-rows-end];
          grid-template-columns: [game-columns-start] auto [game-columns-end];
          background-size: 100% 100%;
          width: 320px;
          height: 180px;
          position: relative;
          contain: strict;
          border-radius: 16px;
          background-color: black;
          position: relative;
          box-shadow: 0 0 2px 1px rgba(0, 0, 0, 0.5);
        }
        main#main st-games st-game a:hover,
        main#main st-games st-game a:focus,
        main#main st-games st-game a:active {
          transform: scale(1.125);
          z-index: 100;
          box-shadow:
            0 0 0px 2px black,
            0 0 0px 4px var(--secondary-color),
            0 0 0px 6px black,
            0 0 2px 7px rgba(0, 0, 0, 0.5);
        }

        main#main st-games st-game.only-match a {
          width: 720px;
          height: 405px;
          box-shadow:
            0 0 0px 2px black,
            0 0 0px 4px var(--secondary-color),
            0 0 0px 6px black,
            0 0 2px 7px rgba(0, 0, 0, 0.5);
        }

        main#main st-games st-game st-cover-full,
        main#main st-games st-game st-cover-lite {
          grid-column: game-columns-start / game-columns-end;
          grid-row: game-rows-start / game-rows-end;
          contain: strict;
        }

        main#main st-games st-game st-cover-full img {
          z-index: 2;
          width: 100%;
          height: 100%;
        }


        main#main st-games st-game st-cover-lite {
          image-rendering: pixelated;
          background-size: 100% 100%;
        }

        main#main st-games st-game st-cover-lite st-name {
          backdrop-filter: blur(calc(180px/8));
          width: 100%;
          height: 100%;
          text-align: center;
          padding: 16px;
          justify-items: center;
          align-items: center;
          -webkit-text-stroke: 1px black;
          text-shadow: 0 0 2px black;
          font-size: 36px;
          font-weight: bold;
          color: #FFFFFF;
          font-family: sans-serif;
        }
</style>

<main id="main">
  <st-search>
    <form method="get" action="/">
      <span>stadia<code>.</code>run<code>/</code></span>
      <input
        name="q"
        type="text"
        placeholder="your favourite Stadia game"
        autocomplete="off"
        autofocus
        id="search-input"
      />
      <button><kbd>⏎</kbd></button>
    </form>
  </st-search>

  <st-games id="games"></st-games>

  <template id="stGameTemplate">
    <st-game data-name="unknown"><a>
      <st-cover-full>
        <img class="cover" crossorigin="anonymous" />
      </st-cover-full>
      <st-cover-lite>
        <st-name></st-name>
      </st-cover-lite>
    </a></st-game>
  </template>
</main>

<script type="module" id="main-script">
  const form = document.querySelector('st-search form');
  const input = form.querySelector('input');
  const button = form.querySelector('button');
  const gameList = document.querySelector('st-games#games');

  let filterElementsPending = null;
  const filterElements = async () => {
    if (filterElementsPending) {
      return filterElementsPending
    }

    return filterElementsPending = new Promise(
      resolve => resolve()
    ).then(() => {
      filterElementsPending = false;

      const q = input.value;
      const qs = {
        exact: q,
        lower: q.toLowerCase(),
        clean: q.toLowerCase().replace(/[^a-z0-9]+/g, '')
      };

      const elements = [];

      for (const child of gameList.children) {
        const name = child.dataset.name;
        const matches =
          !qs.clean ||
          name.toLowerCase().replace(/[^a-z0-9]+/g, '').includes(qs.clean);
        child.firstElementChild.hidden = !matches;
        child.classList.remove('only-match');
        if (matches) {
          elements.push(child);
        }
      }

      if (elements.length === 1) {
        elements[0].classList.add('only-match');
      }

      return elements;
    });
  };

  input.addEventListener('input', event => {
    filterElements().then(elements => {
      const params = new URLSearchParams(location.search);

      params.set("q", input.value);
        history.replaceState(
          null,
          '',
          input.value ? ('/?' + params.toString()) : '/'
        );
    })
  });

  form.addEventListener('submit', (event) => {
    event.preventDefault();

    filterElements().then(elements => {
      const params = new URLSearchParams(location.search);

      if (elements.length === 1) {
        history.pushState(
          null,
          '',
          '/' + input.value.toLowerCase().replace(/[^a-z0-9]+/, '')
        );
        document.title = 'stadia.run/' + input.value.toLowerCase().replace(/[^a-z0-9]+/, '')
        elements[0].querySelector('a').click();
      } else {
        params.set("q", input.value);
        history.replaceState(
          null,
          '',
          input.value ? ('/?' + params.toString()) : '/'
        );
      }
    });
  });

  const checkUrl = () => {
    const slug = document.location.pathname.slice(1) || null;
    const query = new URLSearchParams(document.location.search).get('q') || null;

    if (query) {
      input.value = query;
    } else if (slug) {
      input.value = slug;
      form.submit();
    }
  };

  window.addEventListener('popstate', checkUrl);

  checkUrl();
</script>

<style id="dev-tools-style">
  #dev-tools {
    display: none;
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    height: auto;
    background: white;
    color: black;
    z-index: 100;

    --dev-border: #D0D0D0;
    --dev-background: #F3F3F3;
  }

    #dev-tools.unloaded {
      user-select: none;
      cursor: progress;
      filter: saturate(0.5) contrast(0.5) brightness(0.5);
    }

    #dev-tools.unloaded section {
      pointer-events: none;
      filter: blur(2px);
    }

    #dev-tools:target {
      display: grid;
    }


    #dev-tools header {
      display: block;
      border-top: 1px solid var(--dev-border);
      border-bottom: 1px solid var(--dev-border);
      padding-left: var(--large-margin);
      background: var(--dev-background);
      position: relative;
    }

      #dev-tools header .tab {
        cursor: pointer;
        user-select: none;
        position: relative;
        padding: 4px 10px;
        font-size: 11px;
        top: 1px;
        display: inline-block;
        border-bottom: 2px solid var(--secondary-color);
      }

    #dev-tools .close {
      display: block;
      position: absolute;
      top: 2px;
      right: var(--small-margin);
      bottom: 2px;
      padding: 0 6px;
      font-size: 20px;
      font-family: sans-serif;
      border: 1px solid transparent;
      color: #666;
    }

      #dev-tools .close span {
        position: relative;
        top: -4px;
      }

      #dev-tools .close:hover {
        border: 1px solid #B99;
        background: #EDD;
        color: #444;
      }

    #dev-tools section {
      display: block;
      min-height: 128px;
      max-height: 256px;
      overflow-y: auto;
      padding: var(--small-margin) var(--large-margin);
    }

    #dev-tools section p {
      display: block;
      max-width: 700px;
      line-height: 1.75em;
      text-align: justify;
    }

    #dev-tools button {
      line-height: 1em;
      display: inline-block;
      border: 1px solid var(--dev-border);
      background: var(--dev-background);
      padding: 2px 6px;
    }

      #dev-tools button:enabled:hover {
        color: var(--secondary-color);
      }

      #dev-tools button:enabled:active {
        border-color: var(--secondary-color);
      }
</style>

<aside id="dev-tools" class="unloaded">
  <header>
    <span class="tab">Update Game Data</span>
    <a class="close" href="#"><span>×</span></a>
  </header>

  <section>
    <p>
      <s>Start by <button id="dev-do-spider" disabled>spidering Stadia</button> to discover all of its SKUs (games, bundles, add-ons, and subscriptions), saving them as <button id="download-skus" disabled><code>skus.mjson</code></button>.</s> From each game, take the <code>name</code>, <code>app</code> ID, and <code>fullImage</code> cover, then <button id="fetch-covers">fetch the cover images</button> to generate 64-character base-64 8x8 6-bit-RGB preview tiles we call <code>microImage</code>s, saving them in <button id="download-games"><code>games.mjson</code></button>. From that game data, generate a new <button id="download-html"><code>index.html</code></button> with all of the games included inline.
    </p>
  </section>
</aside>

<script type="module" id="dev-tools-script">
  let prevented = false;

  document.addEventListener('keydown', event => {
    if (event.key === 'F12') {
      if (document.location.hash !== '#dev-tools') {
        document.location.hash = '#dev-tools';
        import('/-/dev-tools.mjs');
        event.preventDefault();
        prevented = true;
      } else {
        if (prevented) {
          prevented = false;
        } else {
          document.location.hash = '';
          event.preventDefault();
        }
      }
    }
  });

  if (document.location.hash === '#dev-tools') {
    import('/-/dev-tools.mjs');
    prevented = true;
  } else {
    document.addEventListener('hashchange', () => {
      if (document.location.hash === '#dev-tools') {
        import('/-/dev-tools.mjs');
        prevented = true;
      }
    });
  }
</script>
